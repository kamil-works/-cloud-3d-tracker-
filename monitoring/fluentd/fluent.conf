# Listen for logs from Docker containers
<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

# Route logs tagged with 'docker.**'
<match docker.**>
  @type copy
  
  # Print logs to the container's stdout for easy debugging
  <store>
    @type stdout
  </store>
  
  # Store logs in a file within the container
  <store>
    @type file
    path /fluentd/log/docker.*.log
    append true
    <buffer>
      timekey 1d
      timekey_wait 10m
      timekey_use_utc true
    </buffer>
  </store>

  # (Optional) Forward to a service like Elasticsearch or Loki
  # <store>
  #   @type elasticsearch
  #   host elasticsearch
  #   port 9200
  #   logstash_format true
  #   logstash_prefix fluentd
  # </store>
</match>